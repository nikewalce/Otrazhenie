{% extends "base.html" %}

{% block content %}
<div class="app-container">
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <div class="logo-container">
                <h1 class="app-logo">Otrazhenie</h1>
                <p class="app-subtitle">–ê–Ω–∞–ª–∏–∑ –∫–æ—Å–º–µ—Ç–∏–∫–∏</p>
            </div>
            <div class="badge-container">
                <span class="product-badge">–ü—Ä–æ–¥—É–∫—Ç–æ–≤:</span>
            </div>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content">
        <div class="results-container">
            <h1 class="results-title">üî¨ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h1>

            <div class="composition-section">
                <h5>–í–≤–µ–¥—ë–Ω–Ω—ã–π —Å–æ—Å—Ç–∞–≤:</h5>
                <p class="composition-text"><em>{{ composition }}</em></p>
            </div>

            <div class="analysis-table">
                <table class="ingredients-table">
                    <thead>
                        <tr>
                            <th>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç</th>
                            <th>–§—É–Ω–∫—Ü–∏—è</th>
                            <th>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</th>
                            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for item in analysis %}
                        {% set score = item['safety_score'] %}
                        {% if score == '?' %}
                            {% set row_class = 'score-unknown' %}
                        {% elif score|int <= 1 %}
                            {% set row_class = 'score-danger' %}
                        {% elif score|int <= 3 %}
                            {% set row_class = 'score-warning' %}
                        {% else %}
                            {% set row_class = 'score-safe' %}
                        {% endif %}
                        <tr class="{{ row_class }}">
                            <td>{{ item['name']|capitalize }}</td>
                            <td>{{ item['function'] }}</td>
                            <td>
                                {% if score == '?' %}
                                    ‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
                                {% elif score|int <= 1 %}
                                    ‚ùå –í—Ä–µ–¥–µ–Ω ({{ score }})
                                {% elif score|int <= 3 %}
                                    ‚ö†Ô∏è –°–ø–æ—Ä–Ω–æ ({{ score }})
                                {% else %}
                                    ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω ({{ score }})
                                {% endif %}
                            </td>
                            <td>{{ item['description'] }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="text-center">
                <a href="{{ url_for('index') }}" class="back-button">
                    <i data-lucide="arrow-left" class="button-icon"></i>
                    –ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
                </a>
            </div>
        </div>
    </main>
</div>
{% endblock %}